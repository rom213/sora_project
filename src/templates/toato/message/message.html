<div class="h-full relative">
    <div class="bg-white text-2xl flex h-full p-1 z-30 rounded-xl flex-col relative">
        <div
            class=" relative h-20 bg-[#c0c8f6]  rounded-lg w-full p-2 flex justify-between overflow-auto scrollbar-custom">
            <div class="w-full flex gap-2">
                <div v-if="statesToaTo" v-for="state in statesToaTo" @click="handleShowStates(state)"
                    class="relative h-16 w-16 rounded-xl cursor-pointer hover:scale-110 hover:border hover:border-black transition-all">
                    <img v-if="state[0].avatar" :src="'../../../static/uploads/' + state[0].avatar" alt=""
                        :class="['h-full w-full object-cover rounded-xl']">
                    <div v-html="state[1].length"
                        class="absolute pb-1 top-0 rounded-full right-0 text-white h-4 w-4 flex text-xs text-center justify-center bg-[#000000]">

                    </div>
                </div>
            </div>
            <div class="bg-white sticky right-0 h-full w-16 flex justify-center items-center rounded-lg hover:scale-110 transition-all cursor-pointer"
                @click="selectImage">
                add
            </div>
        </div>

        <div v-if="!showStates" class="text-center relative top-14">
            Tu vida es importante, habla con alguien; no est치s solo y tus sentimientos importan. Compartir lo que
            sientes es el primer paso hacia el bienestar, y siempre hay personas dispuestas a escuchar y ayudarte a
            superar cualquier obst치culo.
        </div>
        <div v-if="showStates" class="h-full w-full p-2 relative overflow-hidden flex justify-center flex-col lg:px-12">
            <div class="absolute inset-x-1 lg:inset-x-16 top-2 h-3 bg-slate-300 shadow-xl rounded-md">
                <div class="h-full rounded-md bg-blue-300" :style="{ width: progress + '%' }"></div>
            </div>
        
            <!-- Ajuste de imagen sin distorsi칩n -->
            <img v-if="carrusel.imagen" :src="'../../../static/uploads/' + carrusel.imagen" alt=""
                class="h-[600px] max-w-full object-contain">
        
            <div class="absolute bg-[#00000023] top-6 inset-x-1 lg:inset-x-16 h-16 flex items-center justify-center gap-4 rounded-lg">
                <div>
                    <div v-if="!showStates[0].avatar" v-html="showStates[0].letters"
                        :class="['h-11 w-11 md:h-14  md:w-14 rounded-full  flex items-center justify-center ']"
                        :style="{backgroundColor:showStates[0].color}">
                    </div>
                </div>
                <img v-if="showStates[0].avatar" :src="'../../../static/uploads/' + showStates[0].avatar" alt=""
                    :class="['h-11 w-11 md:h-14  md:w-14 rounded-full object-cover']">
                <div class="text-white" v-html="showStates[0].fullname">
                    
                </div>
            </div>
        
            <div v-if="carrusel.title != 'null'"
                class="absolute rounded-lg h-16 bg-[#00000023] bottom-7 inset-x-1 lg:inset-x-16 flex justify-center items-center">
                <div class="text-white text-center lg:text-3xl" v-html="carrusel.title"></div>
            </div>
        </div>
        

        <!-- Mostrar imagen seleccionada -->
        <div v-if="selectedImage" @click="closeModalStateCreate"
            class="absolute top-0 right-0  w-full h-full z-50 overflow-hidden flex justify-center items-center">
            <div @click.stop
                class="absolute top-5 m-w-[300px] sm:m-w-[500px] rounded-md shadow-md p-3 bg-red-200 flex gap-3 flex-col">
                <img :src="selectedImage" alt="Imagen seleccionada" class="max-w-full h-96 rounded-lg object-cover">
                <div class="flex gap-1">
                    <input v-model="titleState"
                        class="h-12 w-full text-gray-600 pl-3 outline-none border border-blue-300 rounded-lg"
                        placeholder="Agrega un comentario" type="text">
                    <button @click="sendState" class="hover:scale-125 transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-10">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

    </div>

    <!-- Input oculto para el selector de archivos, limitado a im치genes -->
    <input type="file" ref="fileInput" style="display: none;" accept="image/*" @change="onFileSelected">
</div>